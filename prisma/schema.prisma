// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

enum Role {
    USER
    ADMIN
}

model User {
    id          String   @id @default(auto()) @map("_id") @db.ObjectId
    username    String   @unique
    name        String
    phone       String
    email       String?
    post        String?  @default("一般工作人员")
    password    String?
    role        Role     @default(USER)
    avatar      String?
    depart      Depart?  @relation(fields: [departId], references: [id])
    departId    Int?
    createTime  DateTime @default(now())
    updatedTime DateTime @default(now())

    @@map("users")
}

model Depart {
    id          Int      @id @map("_id")
    name        String
    parentId    Int      @default(-1)
    createTime  DateTime @default(now())
    updatedTime DateTime @default(now())
    User        User[]

    @@map("depart")
}

model DictType {
    id          Int        @id @map("_id")
    name        String
    createTime  DateTime   @default(now())
    updatedTime DateTime   @default(now())
    DictData    DictData[]

    @@map("dict_type")
}

model DictData {
    id          Int      @id @map("_id")
    parent      DictType @relation(fields: [parentId], references: [id])
    parentId    Int
    name        String
    value       String
    color       String?
    createTime  DateTime @default(now())
    updatedTime DateTime @default(now())

    @@map("dict_data")
}
